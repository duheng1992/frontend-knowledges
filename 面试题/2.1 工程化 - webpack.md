## 一、构建工具与模块化（Webpack/Vite/Rollup）

### 1. Webpack 高级优化（阿里P6+/腾讯）
**题目**：如何优化Webpack构建速度？请描述从开发到生产环境的完整优化方案

**考察点**：
```javascript
// 答案需包含：
1. 开发环境优化：
   - 增量编译（watchOptions）
   - cache-loader/hard-source-webpack-plugin
   - DLLPlugin预编译
   - 缩小loader作用范围（include/exclude）

2. 生产环境优化：
   - 代码分割（SplitChunksPlugin）
   - Tree Shaking（sideEffects配置）
   - 持久化缓存（contenthash）
   - 并行构建（thread-loader）
   - 压缩优化（Terser多进程）

3. 通用优化：
   - 升级Webpack5（持久缓存）
   - 缩小搜索范围（resolve.modules）
   - 精确的externals配置
```

### 2. Vite 原理（字节跳动/快手）
**题目**：对比Vite和Webpack的构建机制差异，为什么Vite开发模式更快？

**深度解析**：
```markdown
| 维度         | Vite                      | Webpack               |
|--------------|---------------------------|-----------------------|
| 开发模式     | 原生ESM按需编译           | 全量打包              |
| 启动速度     | 立即启动（无bundle）      | 依赖打包耗时          |
| HMR          | 原生ESM热更新             | 通过HMR Runtime       |
| 生产构建     | Rollup打包                | 自建打包流程          |
| 缓存机制     | 浏览器强缓存+HTTP304      | 内存FS缓存            |

核心优势：
1. 利用浏览器原生ESM能力
2. Esbuild超快预构建（比Babel快10-100x）
3. 按需编译（路由级编译）
```

## 二、性能优化体系

### 3. 首屏性能监控（美团/滴滴P7）
**题目**：设计一个完整的首屏性能监控方案，包括指标定义、数据采集和异常报警

**工业级方案**：
```javascript
// 核心指标
const metrics = {
  FP: '首次绘制',
  FCP: '首次内容绘制',
  LCP: '最大内容渲染',
  FID: '首次输入延迟',
  CLS: '布局偏移量'
};

// 实现方案
1. 数据采集：
   - Performance API获取关键指标
   - MutationObserver监控DOM稳定性
   - 图片/iframe等资源加载监控

2. 数据分析：
   - 百分位统计（P90/P95）
   - 同比/环比分析
   - 地理/设备维度下钻

3. 智能报警：
   - 基于基线数据的动态阈值
   - 关联依赖变更（发布系统对接）
   - Sentry集成异常堆栈
```

### 4. 代码分割最佳实践（阿里P7+）
**题目**：如何为大型SPA应用设计代码分割策略？需要考虑哪些关键因素？

**高级策略**：
```javascript
// 分层分割方案
1. 基础分割：
   - 第三方库（vendor）
   - 公共工具（utils）
   - 运行时代码（runtime）

2. 路由级分割：
   - React.lazy + Suspense
   - 预加载（webpackPrefetch）

3. 组件级分割：
   - 弹窗/抽屉等非首屏组件
   - 可视化大组件（echarts等）

4. 动态分割：
   - 根据设备能力（webp分割）
   - 按业务维度（A/B测试分支）

// 关键考量：
- 分割粒度与请求数量的平衡
- 缓存命中率优化
- 预加载时机的智能判断
```

## 三、现代化前端架构

### 5. 微前端落地难题（腾讯/阿里P7+）
**题目**：在实现微前端架构时，如何处理以下问题：
1. 样式隔离
2. 全局状态管理
3. 依赖共享
4. 构建部署协调

**深度方案**：
```javascript
// 1. 样式隔离
- Shadow DOM（强隔离）
- CSS Modules + 命名约定（业务前缀）
- PostCSS作用域转换

// 2. 状态管理
- 发布订阅模式（CustomEvent）
- 共享Redux store（主子应用约定）
- 状态快照（沙箱模式）

// 3. 依赖共享
- Webpack externals + CDN
- Module Federation（Web5新特性）
- UMD共享库

// 4. 构建部署
- 版本契约（API兼容性）
- 灰度发布机制
- 依赖版本锁（pnpm workspace）
```

### 6. Monorepo实践（字节P8）
**题目**：对比Lerna、pnpm、Turborepo在Monorepo管理的优劣，如何设计构建流水线？

**专家级分析**：
```markdown
| 工具        | 优势                      | 劣势                  | 适用场景              |
|------------|--------------------------|-----------------------|---------------------|
| Lerna      | 生态成熟                 | 依赖安装慢            | 已有项目迁移         |
| pnpm       | 磁盘效率高               | 部分工具兼容问题      | 新项目/多依赖项目    |
| Turborepo  | 增量构建快               | 新工具风险            | 超大型代码库         |

流水线设计要点：
1. 层级化任务调度（topo排序）
2. 分布式缓存（云缓存共享）
3. 变更影响分析（git diff驱动构建）
4. 可视化依赖图谱
```

## 四、自动化与质量保障

### 7. CI/CD设计（美团/快手P7）
**题目**：设计一个完整的前端CI/CD流水线，需包含代码检查、测试、部署等环节

**生产级方案**：
```yaml
# 示例.gitlab-ci.yml
stages:
  - lint
  - test
  - build
  - deploy

lint-job:
  stage: lint
  script:
    - npx eslint --max-warnings=0
    - npx stylelint "**/*.css"
  cache: 
    key: ${CI_COMMIT_SHA}
    paths:
      - node_modules/

test-job:
  stage: test
  parallel: 3
  script:
    - npx jest --coverage
  artifacts:
    reports:
      coverage_report: coverage/lcov.info

build-job:
  stage: build
  script:
    - npx webpack --mode=production
  artifacts:
    paths:
      - dist/

deploy-job:
  stage: deploy
  only:
    - master
  script:
    - aws s3 sync ./dist s3://prod-bucket
  environment: 
    name: production
```

### 8. 前端监控体系（阿里P8）
**题目**：如何搭建覆盖性能、错误、行为的全链路前端监控体系？

**架构设计**：
```javascript
class FrontendMonitor {
  constructor() {
    // 1. 性能监控
    this.observePerformance(); 
    
    // 2. 错误监控
    window.addEventListener('error', this.captureError);
    
    // 3. 行为埋点
    this.initClickHeatmap();
  }
  
  observePerformance() {
    const observer = new PerformanceObserver(list => {
      const entries = list.getEntries();
      this.uploadMetrics(entries);
    });
    observer.observe({ entryTypes: ['navigation', 'resource'] });
  }
  
  captureError(error) {
    const stack = error.stack || error.message;
    Sentry.captureException(stack);
    
    // 自动诊断
    if (error.message.includes('API')) {
      this.checkBackendHealth();
    }
  }
  
  uploadMetrics(data) {
    // 智能节流上传
    navigator.sendBeacon('/api/monitor', data);
  }
}
```

## 五、前沿技术实践

### 9. 低代码平台设计（腾讯P8）
**题目**：设计低代码平台的核心架构，如何解决以下问题：
1. 组件协议设计
2. 动态渲染引擎
3. 可视化编排
4. 出码方案

**解决方案**：
```javascript
// 1. 组件协议
interface ComponentMeta {
  name: string;
  propsSchema: JSONSchema;  // 属性协议
  slots: SlotDef[];        // 插槽协议
  rules: ValidationRule[]; // 校验规则
}

// 2. 渲染引擎
function render(jsonDSL) {
  return h(jsonDSL.component, {
    props: jsonDSL.props,
    on: jsonDSL.events
  }, renderChildren(jsonDSL.slots));
}

// 3. 可视化编排
class Designer {
  use(plugin) {
    plugin.inject(this.canvas);
  }
  
  export() {
    return this.schemaGenerator.generate();
  }
}

// 4. 出码方案
- 运行时解释（动态渲染）
- 编译时出码（生成Vue/React代码）
- 混合模式（关键组件静态化）
```

### 10. 智能化前端（字节P8+）
**题目**：如何在前端工程中应用AI技术？请举例具体场景和实现方案

**创新实践**：
```markdown
1. 智能代码生成：
   - 根据UI设计稿自动生成组件代码（imgcook）
   - GPT-3辅助编写业务逻辑

2. 异常预测：
   - 基于历史数据的错误模式识别
   - 依赖变更影响分析（机器学习）

3. 性能优化：
   - 构建配置智能推荐
   - 按设备能力动态加载策略

4. 测试自动化：
   - 视觉回归测试（pixel diff）
   - E2E测试用例自动生成
```

---

## 面试应答技巧

1. **STAR法则**：每个问题按情境(Situation)-任务(Task)-行动(Action)-结果(Result)结构回答
   ```markdown
   *案例：Webpack优化*
   - S: 项目有200+页面，构建需8分钟
   - T: 需优化到2分钟内
   - A: 引入DLL/缓存/并行化
   - R: 构建时间降至1分40秒
   ```

2. **深度优先**：对熟悉领域主动展示深度
   ```javascript
   // 当被问及Webpack时：
   "我们团队改写了TerserPlugin的缓存逻辑，这里有个有趣的细节..."
   ```

3. **架构图辅助**：提前准备复杂问题的图示（如微前端架构图）

4. **诚实边界**：对不了解的技术明确表示"目前没有实践经验，但我的理解是..."

建议针对目标公司业务特点准备专项案例（如电商公司重点准备性能优化案例）。